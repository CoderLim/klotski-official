# 更新日志

## [1.0.1] - 2024-10-14

### 🐛 Bug 修复
- **实时碰撞检测**: 修复了拖动方块时可以穿过其他方块的问题
  - 之前：拖动时方块会跟随鼠标，松手后才判断是否可以移动
  - 现在：拖动过程中实时检测碰撞，方块无法穿过其他方块或越界

### 📝 技术细节

#### 修改的文件
- `components/game/Block.tsx` - 改进拖拽逻辑

#### 实现原理
1. 在拖拽开始时，记录起始位置和当前有效位置
2. 在拖拽过程中（`handlePointerMove`）：
   - 根据鼠标移动计算目标网格位置
   - 使用 `canMoveTo()` 实时检测该位置是否合法
   - 如果合法，更新当前有效位置
   - 如果不合法，保持上一个有效位置
   - 视觉上显示当前有效位置（而非鼠标位置）
3. 拖拽结束时，将方块移动到最后的有效位置

#### 用户体验改进
- ✅ 方块拖动时会"卡住"在障碍物边缘，提供物理反馈
- ✅ 无法穿过其他方块或越界，更符合物理直觉
- ✅ 拖拽更精准，误操作更少
- ✅ 移动音效只在真正移动时播放

### 🧪 测试方法

启动游戏后：
```bash
npm run dev
```

测试步骤：
1. 打开任意关卡
2. 尝试拖动一个方块穿过相邻的方块
3. 观察方块会在接触到其他方块时停止移动
4. 尝试拖动方块超出棋盘边界
5. 观察方块会在边界处停止

预期结果：
- ✅ 方块无法穿过其他方块
- ✅ 方块无法移出棋盘
- ✅ 拖动体验流畅，没有明显卡顿
- ✅ 只有在合法移动时才有吸附效果

---

## [1.0.0] - 2024-10-14

### 🎉 首次发布

完整的华容道拼图游戏，包含：
- ✅ 完整游戏机制（拖拽、碰撞、胜利判定）
- ✅ 6 个经典拼图布局
- ✅ 撤销/重做/重置功能
- ✅ 自动保存进度
- ✅ 音效和动画
- ✅ 响应式设计
- ✅ 键盘导航
- ✅ 完整文档

详见 [README.md](./README.md) 和 [COMPLETION_REPORT.md](./COMPLETION_REPORT.md)

