# åå®¹é“ - Klotski Puzzle Game

<div align="center">

![åå®¹é“](https://img.shields.io/badge/åå®¹é“-Klotski-orange?style=for-the-badge)
![Next.js](https://img.shields.io/badge/Next.js-14+-black?style=for-the-badge&logo=next.js)
![TypeScript](https://img.shields.io/badge/TypeScript-5+-blue?style=for-the-badge&logo=typescript)
![License](https://img.shields.io/badge/License-MIT-green?style=for-the-badge)

ä¸€ä¸ªå®Œæ•´ã€ç°ä»£åŒ–çš„åå®¹é“æ‹¼å›¾æ¸¸æˆï¼Œä½¿ç”¨ Next.js 14 + TypeScript å¼€å‘

[åœ¨çº¿æ¼”ç¤º](https://klotski-official.vercel.app/) | [å¿«é€Ÿå¼€å§‹](https://klotski-official.vercel.app/) | [æ¸¸æˆè§„åˆ™](#æ¸¸æˆè§„åˆ™)

</div>

---

## âœ¨ ç‰¹æ€§

- ğŸ® **å®Œæ•´æ¸¸æˆä½“éªŒ** - æ”¯æŒé¼ æ ‡æ‹–æ‹½ã€è§¦æ‘¸æ“ä½œå’Œé”®ç›˜æ§åˆ¶
- ğŸ§© **6+ ç»å…¸å¸ƒå±€** - æ¨ªåˆ€ç«‹é©¬ã€è¿‘åœ¨å’«å°ºã€å±‚å±‚è®¾é˜²ç­‰ç»å…¸å…³å¡
- ğŸŒ **å¤šè¯­è¨€æ”¯æŒ** - æ”¯æŒä¸­æ–‡ã€è‹±æ–‡ã€æ—¥æ–‡ã€è¥¿ç­ç‰™è¯­ã€è‘¡è„ç‰™è¯­ã€éŸ©è¯­ï¼ˆé»˜è®¤è‹±æ–‡ï¼‰
- ğŸ¯ **æ™ºèƒ½æ£€æµ‹** - å®æ—¶ç¢°æ’æ£€æµ‹ã€è¾¹ç•Œçº¦æŸã€èƒœåˆ©åˆ¤å®š
- â±ï¸ **è¿›åº¦è¿½è¸ª** - ç§»åŠ¨æ­¥æ•°ã€è®¡æ—¶å™¨ã€å†å²è®°å½•
- ğŸ”„ **æ’¤é”€/é‡åš** - å®Œæ•´çš„æ“ä½œå†å²ç®¡ç†
- ğŸ’¾ **è‡ªåŠ¨ä¿å­˜** - LocalStorage æŒä¹…åŒ–æ¸¸æˆè¿›åº¦
- ğŸ¨ **ç²¾ç¾ UI** - è¡—æœºé£æ ¼ç•Œé¢ã€æµç•…åŠ¨ç”»ã€å“åº”å¼è®¾è®¡
- ğŸ”Š **éŸ³æ•ˆåé¦ˆ** - ç§»åŠ¨ã€èƒœåˆ©ã€é”™è¯¯ç­‰éŸ³æ•ˆï¼ˆå¯é™éŸ³ï¼‰
- â™¿ **æ— éšœç¢æ”¯æŒ** - ARIA æ ‡ç­¾ã€é”®ç›˜å¯¼èˆªã€é«˜å¯¹æ¯”åº¦ç„¦ç‚¹
- ğŸ“± **è·¨å¹³å°** - æ”¯æŒæ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js 18+
- npm / pnpm / yarn

### å®‰è£…æ­¥éª¤

```bash
# 1. å…‹éš†ä»“åº“
git clone https://github.com/your-username/klotski-official.git
cd klotski-official

# 2. å®‰è£…ä¾èµ–
npm install
# æˆ–
pnpm install

# 3. è¿è¡Œå¼€å‘æœåŠ¡å™¨
npm run dev
# æˆ–
pnpm dev

# 4. æ‰“å¼€æµè§ˆå™¨è®¿é—®
# http://localhost:3000
```

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
npm run build
npm start
```

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œå•å…ƒæµ‹è¯•
npm test

# æµ‹è¯•è¦†ç›–ç‡
npm run test:coverage
```

## ğŸ® æ¸¸æˆè§„åˆ™

### ç›®æ ‡
å°†çº¢è‰²çš„ **æ›¹æ“æ–¹å—ï¼ˆ2Ã—2ï¼‰** ç§»åŠ¨åˆ°æ£‹ç›˜åº•éƒ¨ä¸­å¤®çš„å‡ºå£ä½ç½®å³å¯è·èƒœã€‚

### æ“ä½œæ–¹å¼

#### é¼ æ ‡/è§¦æ‘¸
- ç›´æ¥æ‹–æ‹½æ–¹å—ç§»åŠ¨

#### é”®ç›˜æ§åˆ¶
- `Tab` / `Shift+Tab` - åœ¨æ–¹å—é—´åˆ‡æ¢ç„¦ç‚¹
- `æ–¹å‘é”®` - ç§»åŠ¨é€‰ä¸­çš„æ–¹å—ï¼ˆ1æ ¼ï¼‰
- `Enter` - é€‰ä¸­/å–æ¶ˆé€‰ä¸­æ–¹å—
- `U` - æ’¤é”€ä¸Šä¸€æ­¥
- `R` - é‡åš
- `Ctrl+R` - é‡ç½®æ‹¼å›¾
- `ESC` - å…³é—­å¼¹çª—

### æ–¹å—ç±»å‹

| æ–¹å— | å°ºå¯¸ | é¢œè‰² | è¯´æ˜ |
|------|------|------|------|
| æ›¹æ“ | 2Ã—2 | çº¢è‰² | ç›®æ ‡æ–¹å—ï¼Œéœ€ç§»è‡³å‡ºå£ |
| ç«–å°† | 2Ã—1 | é»„è‰² | ç«–å‘é•¿æ–¹å— |
| æ¨ªå°† | 1Ã—2 | è“è‰² | æ¨ªå‘é•¿æ–¹å— |
| å°å…µ | 1Ã—1 | ç»¿è‰² | æ­£æ–¹å½¢å°å— |

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
klotski-official/
â”œâ”€â”€ app/                      # Next.js App Router
â”‚   â”œâ”€â”€ [locale]/            # å¤šè¯­è¨€è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ layout.tsx       # è¯­è¨€å¸ƒå±€
â”‚   â”‚   â”œâ”€â”€ page.tsx         # é¦–é¡µï¼ˆå…³å¡é€‰æ‹©ï¼‰
â”‚   â”‚   â””â”€â”€ p/[slug]/page.tsx # æ¸¸æˆé¡µé¢
â”‚   â”œâ”€â”€ layout.tsx           # æ ¹å¸ƒå±€
â”‚   â””â”€â”€ globals.css          # å…¨å±€æ ·å¼
â”œâ”€â”€ components/              # React ç»„ä»¶
â”‚   â”œâ”€â”€ game/
â”‚   â”‚   â”œâ”€â”€ Board.tsx        # æ¸¸æˆæ£‹ç›˜
â”‚   â”‚   â”œâ”€â”€ Block.tsx        # å¯æ‹–æ‹½æ–¹å—
â”‚   â”‚   â””â”€â”€ PuzzlePreview.tsx # æ‹¼å›¾é¢„è§ˆ
â”‚   â””â”€â”€ ui/
â”‚       â”œâ”€â”€ HUD.tsx          # çŠ¶æ€æ˜¾ç¤º
â”‚       â”œâ”€â”€ Controls.tsx     # æ§åˆ¶æŒ‰é’®
â”‚       â”œâ”€â”€ Modal.tsx        # é€šç”¨å¼¹çª—
â”‚       â”œâ”€â”€ WinDialog.tsx    # èƒœåˆ©å¯¹è¯æ¡†
â”‚       â”œâ”€â”€ HelpDialog.tsx   # å¸®åŠ©è¯´æ˜
â”‚       â”œâ”€â”€ Confetti.tsx     # èƒœåˆ©ç‰¹æ•ˆ
â”‚       â””â”€â”€ LanguageSwitcher.tsx # è¯­è¨€åˆ‡æ¢å™¨
â”œâ”€â”€ i18n/                    # å›½é™…åŒ–é…ç½®
â”‚   â”œâ”€â”€ request.ts           # i18n é…ç½®
â”‚   â””â”€â”€ routing.ts           # è·¯ç”±é…ç½®
â”œâ”€â”€ messages/                # ç¿»è¯‘æ–‡ä»¶
â”‚   â”œâ”€â”€ en.json              # è‹±æ–‡
â”‚   â”œâ”€â”€ zh.json              # ä¸­æ–‡
â”‚   â”œâ”€â”€ ja.json              # æ—¥æ–‡
â”‚   â”œâ”€â”€ es.json              # è¥¿ç­ç‰™è¯­
â”‚   â”œâ”€â”€ pt.json              # è‘¡è„ç‰™è¯­
â”‚   â””â”€â”€ ko.json              # éŸ©è¯­
â”œâ”€â”€ lib/                     # æ ¸å¿ƒé€»è¾‘
â”‚   â”œâ”€â”€ puzzles/
â”‚   â”‚   â”œâ”€â”€ types.ts         # ç±»å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ index.ts         # æ‹¼å›¾æ•°æ®åº“
â”‚   â”œâ”€â”€ engine/
â”‚   â”‚   â”œâ”€â”€ collision.ts     # ç¢°æ’æ£€æµ‹
â”‚   â”‚   â”œâ”€â”€ movement.ts      # ç§»åŠ¨é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ validation.ts    # è¾¹ç•ŒéªŒè¯
â”‚   â”‚   â””â”€â”€ win.ts           # èƒœåˆ©åˆ¤å®š
â”‚   â”œâ”€â”€ store/
â”‚   â”‚   â””â”€â”€ useGameStore.ts  # Zustand çŠ¶æ€ç®¡ç†
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ grid.ts          # ç½‘æ ¼è®¡ç®—
â”‚       â”œâ”€â”€ colors.ts        # é¢œè‰²æ˜ å°„
â”‚       â””â”€â”€ sound.ts         # éŸ³æ•ˆç®¡ç†
â”œâ”€â”€ public/
â”‚   â””â”€â”€ sounds/              # éŸ³æ•ˆæ–‡ä»¶
â”œâ”€â”€ __tests__/               # å•å…ƒæµ‹è¯•
â”‚   â””â”€â”€ engine.test.ts
â”œâ”€â”€ middleware.ts            # å›½é™…åŒ–ä¸­é—´ä»¶
â”œâ”€â”€ tailwind.config.ts       # Tailwind é…ç½®
â”œâ”€â”€ vitest.config.ts         # æµ‹è¯•é…ç½®
â””â”€â”€ package.json
```

## ğŸ§© å¦‚ä½•æ·»åŠ æ–°æ‹¼å›¾

### ç¬¬ä¸€æ­¥ï¼šå®šä¹‰æ‹¼å›¾é…ç½®

åœ¨ `lib/puzzles/index.ts` ä¸­æ·»åŠ æ–°çš„æ‹¼å›¾é…ç½®ï¼š

```typescript
const myPuzzleConfig: PuzzleConfig = {
  name: 'æˆ‘çš„æ‹¼å›¾',
  slug: 'my-puzzle',
  difficulty: 'medium', // 'easy' | 'medium' | 'hard' | 'expert'
  blocks: [
    { shape: [2, 2], position: [0, 1] }, // æ›¹æ“ (å¿…é¡»æœ‰ä¸€ä¸ª)
    { shape: [2, 1], position: [0, 0] }, // ç«–å°†
    { shape: [1, 2], position: [2, 1] }, // æ¨ªå°†
    { shape: [1, 1], position: [3, 1] }, // å°å…µ
    // ... æ›´å¤šæ–¹å—
  ],
};
```

### ç¬¬äºŒæ­¥ï¼šæ³¨å†Œåˆ°æ‹¼å›¾è¡¨

```typescript
export const PUZZLES: Record<string, PuzzleConfig> = {
  // ... ç°æœ‰æ‹¼å›¾
  'my-puzzle': myPuzzleConfig,
};
```

### ç¬¬ä¸‰æ­¥ï¼šéªŒè¯é…ç½®

è¿è¡Œå¼€å‘æœåŠ¡å™¨ï¼Œé…ç½®ä¼šè‡ªåŠ¨éªŒè¯ï¼š
- æ£‹ç›˜å°ºå¯¸ï¼š5Ã—4
- æ–¹å—ä¸èƒ½é‡å 
- æ–¹å—ä¸èƒ½è¶…å‡ºè¾¹ç•Œ
- å¿…é¡»åŒ…å«ä¸€ä¸ª 2Ã—2 çº¢è‰²æ–¹å—

### JSON Schema

```typescript
{
  "name": "string",           // æ‹¼å›¾åç§°
  "slug": "string",           // URL æ ‡è¯†ç¬¦
  "difficulty": "easy" | "medium" | "hard" | "expert",
  "blocks": [
    {
      "shape": [rows, cols],  // [é«˜åº¦, å®½åº¦]
      "position": [row, col]  // [è¡Œ, åˆ—] (0-indexed)
    }
  ]
}
```

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: Next.js 15 (App Router)
- **è¯­è¨€**: TypeScript 5
- **å›½é™…åŒ–**: next-intl
- **çŠ¶æ€ç®¡ç†**: Zustand + Immer
- **æ ·å¼**: Tailwind CSS 4
- **åŠ¨ç”»**: Framer Motion
- **éŸ³æ•ˆ**: Howler.js
- **éªŒè¯**: Zod
- **æµ‹è¯•**: Vitest + Testing Library
- **ä»£ç è´¨é‡**: ESLint + TypeScript

## ğŸ“Š æ¸¸æˆæ•°æ®

### ç»å…¸å¸ƒå±€

1. **æ¨ªåˆ€ç«‹é©¬** - ä¸­ç­‰éš¾åº¦ï¼Œéœ€çº¦ 80+ æ­¥
2. **è¿‘åœ¨å’«å°º** - ç®€å•ï¼Œéœ€çº¦ 60+ æ­¥
3. **å±‚å±‚è®¾é˜²** - å›°éš¾ï¼Œéœ€çº¦ 100+ æ­¥
4. **æ°´æ³„ä¸é€š** - ä¸“å®¶ï¼Œéœ€çº¦ 120+ æ­¥
5. **å°ç‡•å‡ºå·¢** - ä¸­ç­‰ï¼Œéœ€çº¦ 70+ æ­¥
6. **å…µæŒ¡å°†é˜»** - å›°éš¾ï¼Œéœ€çº¦ 90+ æ­¥

### æ€§èƒ½æŒ‡æ ‡

- âš¡ é¦–å±åŠ è½½ï¼š< 1s
- ğŸ¯ æ‹–æ‹½å“åº”ï¼š60 FPS
- ğŸ’¾ çŠ¶æ€ä¿å­˜ï¼šå®æ—¶
- ğŸ“¦ æ‰“åŒ…å¤§å°ï¼š< 500KB (gzipped)

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

### å¼€å‘æµç¨‹

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

### ä»£ç è§„èŒƒ

- éµå¾ª TypeScript ä¸¥æ ¼æ¨¡å¼
- ä½¿ç”¨ ESLint é…ç½®
- ç»„ä»¶ä½¿ç”¨å‡½æ•°å¼ + Hooks
- æ·»åŠ å¿…è¦çš„æ³¨é‡Šå’Œç±»å‹

## ğŸŒ å¤šè¯­è¨€æ”¯æŒ

é¡¹ç›®å·²æ”¯æŒ 6 ç§è¯­è¨€ï¼š

| è¯­è¨€ | ä»£ç  | çŠ¶æ€ |
|------|------|------|
| ğŸ‡¬ğŸ‡§ English | `en` | âœ… é»˜è®¤ |
| ğŸ‡¨ğŸ‡³ ç®€ä½“ä¸­æ–‡ | `zh` | âœ… |
| ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª | `ja` | âœ… |
| ğŸ‡ªğŸ‡¸ EspaÃ±ol | `es` | âœ… |
| ğŸ‡µğŸ‡¹ PortuguÃªs | `pt` | âœ… |
| ğŸ‡°ğŸ‡· í•œêµ­ì–´ | `ko` | âœ… |

è®¿é—®ä¸åŒè¯­è¨€ç‰ˆæœ¬ï¼š
- è‹±æ–‡: `http://localhost:3000/en`
- ä¸­æ–‡: `http://localhost:3000/zh`
- æ—¥æ–‡: `http://localhost:3000/ja`

è¯¦ç»†çš„å›½é™…åŒ–æŒ‡å—è¯·æŸ¥çœ‹ [I18N_GUIDE.md](I18N_GUIDE.md)

## ğŸ“ å¾…åŠäº‹é¡¹

- [x] å›½é™…åŒ–ï¼ˆè‹±æ–‡ã€ä¸­æ–‡ã€æ—¥æ–‡ã€è¥¿ç­ç‰™è¯­ã€è‘¡è„ç‰™è¯­ã€éŸ©è¯­ï¼‰
- [ ] æ·»åŠ æ›´å¤šç»å…¸å¸ƒå±€ï¼ˆ10+ï¼‰
- [ ] å®ç°è‡ªåŠ¨æ±‚è§£å™¨ï¼ˆAIï¼‰
- [ ] æ·»åŠ å¤šäººå¯¹æˆ˜æ¨¡å¼
- [ ] æ”¯æŒè‡ªå®šä¹‰æ‹¼å›¾ç¼–è¾‘å™¨
- [ ] æ’è¡Œæ¦œåŠŸèƒ½ï¼ˆæœ€å°‘æ­¥æ•°/æœ€çŸ­æ—¶é—´ï¼‰
- [ ] PWA æ”¯æŒï¼ˆç¦»çº¿å¯ç”¨ï¼‰
- [ ] æç¤ºç³»ç»Ÿï¼ˆæ˜¾ç¤ºå¯èƒ½çš„ç§»åŠ¨ï¼‰

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## ğŸ™ è‡´è°¢

- åå®¹é“æ¸¸æˆçµæ„Ÿæ¥è‡ªä¸­å›½ä¼ ç»Ÿç›Šæ™ºæ¸¸æˆ
- ç»å…¸å¸ƒå±€å‚è€ƒè‡ªå†å²æ–‡çŒ®å’Œäº’è”ç½‘èµ„æº
- UI è®¾è®¡å—ç°ä»£è¡—æœºæ¸¸æˆå¯å‘

---

<div align="center">

**å¦‚æœè§‰å¾—è¿™ä¸ªé¡¹ç›®æœ‰ç”¨ï¼Œè¯·ç»™ä¸€ä¸ª â­ Starï¼**

Made with â¤ï¸ by [Your Name]

[æŠ¥å‘Š Bug](https://github.com/your-username/klotski-official/issues) Â· [åŠŸèƒ½å»ºè®®](https://github.com/your-username/klotski-official/issues)

</div>
